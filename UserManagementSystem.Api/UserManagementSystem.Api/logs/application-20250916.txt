2025-09-16 11:14:43.257 +02:00 [INF] Starting web application
2025-09-16 11:14:45.223 +02:00 [INF] User profile is available. Using 'C:\Users\Axel1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-16 11:14:45.954 +02:00 [INF] Now listening on: https://localhost:7149
2025-09-16 11:14:45.956 +02:00 [INF] Now listening on: http://localhost:5114
2025-09-16 11:14:45.967 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 11:14:45.970 +02:00 [INF] Hosting environment: Development
2025-09-16 11:14:45.972 +02:00 [INF] Content root path: C:\Users\Axel1\Desktop\Proyectos .Net\UserManagementSystem.Api\UserManagementSystem.Api
2025-09-16 11:14:49.116 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/_framework/aspnetcore-browser-refresh.js - null null
2025-09-16 11:14:49.116 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/_vs/browserLink - null null
2025-09-16 11:14:49.188 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/_framework/aspnetcore-browser-refresh.js - 200 13784 application/javascript; charset=utf-8 85.6939ms
2025-09-16 11:14:49.410 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/_vs/browserLink - 200 null text/javascript; charset=UTF-8 309.6838ms
2025-09-16 11:14:49.532 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/swagger/v1/swagger.json - null null
2025-09-16 11:14:50.023 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 490.6669ms
2025-09-16 12:18:21.081 +02:00 [INF] Starting web application
2025-09-16 12:18:22.690 +02:00 [INF] User profile is available. Using 'C:\Users\Axel1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-16 12:18:23.078 +02:00 [INF] Now listening on: https://localhost:7149
2025-09-16 12:18:23.080 +02:00 [INF] Now listening on: http://localhost:5114
2025-09-16 12:18:23.085 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 12:18:23.087 +02:00 [INF] Hosting environment: Development
2025-09-16 12:18:23.089 +02:00 [INF] Content root path: C:\Users\Axel1\Desktop\Proyectos .Net\UserManagementSystem.Api\UserManagementSystem.Api
2025-09-16 12:18:23.695 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/_framework/aspnetcore-browser-refresh.js - null null
2025-09-16 12:18:23.695 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/_vs/browserLink - null null
2025-09-16 12:18:23.751 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/_framework/aspnetcore-browser-refresh.js - 200 13784 application/javascript; charset=utf-8 66.8863ms
2025-09-16 12:18:23.834 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/_vs/browserLink - 200 null text/javascript; charset=UTF-8 151.0159ms
2025-09-16 12:18:24.031 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/swagger/v1/swagger.json - null null
2025-09-16 12:18:24.560 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 529.2938ms
2025-09-16 12:32:52.198 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7149/api/Auth/login - application/json 58
2025-09-16 12:32:52.351 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.AuthController.Login (UserManagementSystem.Api)'
2025-09-16 12:32:52.399 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[UserManagementSystem.Application.DTOs.Auth.LoginResponseDto]]] Login(UserManagementSystem.Application.DTOs.Auth.LoginRequestDto) on controller UserManagementSystem.Api.Controllers.AuthController (UserManagementSystem.Api).
2025-09-16 12:32:53.923 +02:00 [INF] API: Login endpoint called for username: Admin_AxelSC
2025-09-16 12:32:53.928 +02:00 [INF] Login attempt for username: Admin_AxelSC
2025-09-16 12:32:54.917 +02:00 [INF] Executed DbCommand (79ms) [Parameters=[@__username_0='?' (Size = 32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-09-16 12:32:55.210 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 12:32:56.568 +02:00 [WRN] Login failed - invalid password for user: Admin_AxelSC
2025-09-16 12:32:56.814 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (Size = 2000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AuditLogs] ([Action], [Metadata], [Timestamp], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-09-16 12:32:56.872 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[UserManagementSystem.Application.DTOs.Auth.LoginResponseDto, UserManagementSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-16 12:32:56.910 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.AuthController.Login (UserManagementSystem.Api) in 4502.2405ms
2025-09-16 12:32:56.914 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.AuthController.Login (UserManagementSystem.Api)'
2025-09-16 12:32:56.925 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7149/api/Auth/login - 401 null application/json; charset=utf-8 4727.1857ms
2025-09-16 12:55:34.178 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7149/api/Auth/login - application/json 58
2025-09-16 12:55:34.188 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.AuthController.Login (UserManagementSystem.Api)'
2025-09-16 12:55:34.191 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[UserManagementSystem.Application.DTOs.Auth.LoginResponseDto]]] Login(UserManagementSystem.Application.DTOs.Auth.LoginRequestDto) on controller UserManagementSystem.Api.Controllers.AuthController (UserManagementSystem.Api).
2025-09-16 12:55:34.273 +02:00 [INF] API: Login endpoint called for username: Admin_AxelSC
2025-09-16 12:55:34.275 +02:00 [INF] Login attempt for username: Admin_AxelSC
2025-09-16 12:55:34.300 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__username_0='?' (Size = 32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-09-16 12:55:34.311 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 12:55:34.824 +02:00 [INF] JWT Key length: 54
2025-09-16 12:55:34.827 +02:00 [INF] JWT Issuer: UserManagementSystem
2025-09-16 12:55:34.829 +02:00 [INF] JWT Audience: UserManagementSystemUsers
2025-09-16 12:55:34.886 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (Size = 2000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AuditLogs] ([Action], [Metadata], [Timestamp], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-09-16 12:55:34.895 +02:00 [INF] Login successful for user: Admin_AxelSC
2025-09-16 12:55:34.899 +02:00 [INF] Executing OkObjectResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[UserManagementSystem.Application.DTOs.Auth.LoginResponseDto, UserManagementSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-16 12:55:34.910 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.AuthController.Login (UserManagementSystem.Api) in 714.8573ms
2025-09-16 12:55:34.913 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.AuthController.Login (UserManagementSystem.Api)'
2025-09-16 12:55:34.917 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7149/api/Auth/login - 200 null application/json; charset=utf-8 739.3133ms
2025-09-16 12:59:27.057 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7149/api/Teams - application/json 76
2025-09-16 12:59:27.172 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.TeamsController.CreateTeam (UserManagementSystem.Api)'
2025-09-16 12:59:27.184 +02:00 [INF] Route matched with {action = "CreateTeam", controller = "Teams"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[UserManagementSystem.Application.DTOs.Teams.TeamDto]]] CreateTeam(UserManagementSystem.Application.DTOs.Teams.CreateTeamDto) on controller UserManagementSystem.Api.Controllers.TeamsController (UserManagementSystem.Api).
2025-09-16 12:59:27.224 +02:00 [INF] API: CreateTeam called by admin: Admin_AxelSC
2025-09-16 12:59:27.230 +02:00 [INF] Creating team with name: TestDepartment
2025-09-16 12:59:27.252 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__name_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[CreatedAt], [t].[Description], [t].[Name]
FROM [Teams] AS [t]
WHERE [t].[Name] = @__name_0
2025-09-16 12:59:27.326 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (Size = 2000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 500), @p6='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuditLogs] ([Action], [Metadata], [Timestamp], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Teams] ([CreatedAt], [Description], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p4, @p5, @p6);
2025-09-16 12:59:27.429 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__teamId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[TeamId] = @__teamId_0 AND EXISTS (
        SELECT 1
        FROM [UserRoles] AS [u0]
        INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
        WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Manager')
) AS [t]
LEFT JOIN (
    SELECT [u1].[UserId], [u1].[RoleId], [u1].[AssignedAt], [r0].[Id], [r0].[Description], [r0].[Name]
    FROM [UserRoles] AS [u1]
    INNER JOIN [Roles] AS [r0] ON [u1].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 12:59:27.436 +02:00 [INF] Successfully created team: TestDepartment with ID: 5
2025-09-16 12:59:27.442 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[UserManagementSystem.Application.DTOs.Teams.TeamDto, UserManagementSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-16 12:59:27.486 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.TeamsController.CreateTeam (UserManagementSystem.Api) in 297.3679ms
2025-09-16 12:59:27.490 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.TeamsController.CreateTeam (UserManagementSystem.Api)'
2025-09-16 12:59:27.492 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7149/api/Teams - 201 null application/json; charset=utf-8 436.8959ms
2025-09-16 13:00:00.372 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/api/Teams - null null
2025-09-16 13:00:00.406 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.TeamsController.GetAllTeams (UserManagementSystem.Api)'
2025-09-16 13:00:00.413 +02:00 [INF] Route matched with {action = "GetAllTeams", controller = "Teams"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[System.Collections.Generic.List`1[UserManagementSystem.Application.DTOs.Teams.TeamSummaryDto]]]] GetAllTeams() on controller UserManagementSystem.Api.Controllers.TeamsController (UserManagementSystem.Api).
2025-09-16 13:00:00.420 +02:00 [INF] API: GetAllTeams called by user: Admin_AxelSC
2025-09-16 13:00:00.425 +02:00 [INF] Retrieving all teams
2025-09-16 13:00:00.444 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Description], [t].[Name]
FROM [Teams] AS [t]
2025-09-16 13:00:00.462 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__teamId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[TeamId] = @__teamId_0 AND EXISTS (
        SELECT 1
        FROM [UserRoles] AS [u0]
        INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
        WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Manager')
) AS [t]
LEFT JOIN (
    SELECT [u1].[UserId], [u1].[RoleId], [u1].[AssignedAt], [r0].[Id], [r0].[Description], [r0].[Name]
    FROM [UserRoles] AS [u1]
    INNER JOIN [Roles] AS [r0] ON [u1].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 13:00:00.499 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__team_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[TeamId] = @__team_Id_0
2025-09-16 13:00:00.510 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__teamId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[TeamId] = @__teamId_0 AND EXISTS (
        SELECT 1
        FROM [UserRoles] AS [u0]
        INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
        WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Manager')
) AS [t]
LEFT JOIN (
    SELECT [u1].[UserId], [u1].[RoleId], [u1].[AssignedAt], [r0].[Id], [r0].[Description], [r0].[Name]
    FROM [UserRoles] AS [u1]
    INNER JOIN [Roles] AS [r0] ON [u1].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 13:00:00.517 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__team_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[TeamId] = @__team_Id_0
2025-09-16 13:00:00.525 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__teamId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[TeamId] = @__teamId_0 AND EXISTS (
        SELECT 1
        FROM [UserRoles] AS [u0]
        INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
        WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Manager')
) AS [t]
LEFT JOIN (
    SELECT [u1].[UserId], [u1].[RoleId], [u1].[AssignedAt], [r0].[Id], [r0].[Description], [r0].[Name]
    FROM [UserRoles] AS [u1]
    INNER JOIN [Roles] AS [r0] ON [u1].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 13:00:00.532 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__team_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[TeamId] = @__team_Id_0
2025-09-16 13:00:00.539 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__teamId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[TeamId] = @__teamId_0 AND EXISTS (
        SELECT 1
        FROM [UserRoles] AS [u0]
        INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
        WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Manager')
) AS [t]
LEFT JOIN (
    SELECT [u1].[UserId], [u1].[RoleId], [u1].[AssignedAt], [r0].[Id], [r0].[Description], [r0].[Name]
    FROM [UserRoles] AS [u1]
    INNER JOIN [Roles] AS [r0] ON [u1].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 13:00:00.546 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__team_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[TeamId] = @__team_Id_0
2025-09-16 13:00:00.554 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__teamId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[TeamId] = @__teamId_0 AND EXISTS (
        SELECT 1
        FROM [UserRoles] AS [u0]
        INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
        WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Manager')
) AS [t]
LEFT JOIN (
    SELECT [u1].[UserId], [u1].[RoleId], [u1].[AssignedAt], [r0].[Id], [r0].[Description], [r0].[Name]
    FROM [UserRoles] AS [u1]
    INNER JOIN [Roles] AS [r0] ON [u1].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 13:00:00.562 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__team_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[TeamId] = @__team_Id_0
2025-09-16 13:00:00.567 +02:00 [INF] Successfully retrieved 5 teams
2025-09-16 13:00:00.570 +02:00 [INF] Executing OkObjectResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[System.Collections.Generic.List`1[[UserManagementSystem.Application.DTOs.Teams.TeamSummaryDto, UserManagementSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:00:00.577 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.TeamsController.GetAllTeams (UserManagementSystem.Api) in 160.6763ms
2025-09-16 13:00:00.581 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.TeamsController.GetAllTeams (UserManagementSystem.Api)'
2025-09-16 13:00:00.584 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/api/Teams - 200 null application/json; charset=utf-8 213.8249ms
2025-09-16 13:03:59.291 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/api/Users - null null
2025-09-16 13:03:59.313 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.UsersController.GetAllUsers (UserManagementSystem.Api)'
2025-09-16 13:03:59.321 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[System.Collections.Generic.List`1[UserManagementSystem.Application.DTOs.UserSummaryDto]]]] GetAllUsers() on controller UserManagementSystem.Api.Controllers.UsersController (UserManagementSystem.Api).
2025-09-16 13:03:59.329 +02:00 [INF] API: GetAllUsers called by user: Admin_AxelSC
2025-09-16 13:03:59.334 +02:00 [INF] Retrieving all users
2025-09-16 13:03:59.347 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
FROM [Users] AS [u]
2025-09-16 13:03:59.354 +02:00 [INF] Successfully retrieved 2 users
2025-09-16 13:03:59.357 +02:00 [INF] Executing OkObjectResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[System.Collections.Generic.List`1[[UserManagementSystem.Application.DTOs.UserSummaryDto, UserManagementSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:03:59.363 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.UsersController.GetAllUsers (UserManagementSystem.Api) in 37.8378ms
2025-09-16 13:03:59.367 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.UsersController.GetAllUsers (UserManagementSystem.Api)'
2025-09-16 13:03:59.370 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/api/Users - 200 null application/json; charset=utf-8 79.5714ms
2025-09-16 13:05:20.858 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7149/api/Users - application/json 133
2025-09-16 13:05:20.870 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.UsersController.CreateUser (UserManagementSystem.Api)'
2025-09-16 13:05:20.877 +02:00 [INF] Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[UserManagementSystem.Application.DTOs.UserDto]]] CreateUser(UserManagementSystem.Application.DTOs.CreateUserDto) on controller UserManagementSystem.Api.Controllers.UsersController (UserManagementSystem.Api).
2025-09-16 13:05:20.898 +02:00 [INF] API: CreateUser called by admin: Admin_AxelSC
2025-09-16 13:05:20.905 +02:00 [INF] Creating user with username: TestUser1, email: TestUser@Peperoni
2025-09-16 13:05:20.934 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__username_0='?' (Size = 32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:05:20.955 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:05:21.497 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 256), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (Size = 512), @p5='?' (DbType = Int32), @p6='?' (Size = 32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [Email], [IsActive], [LastLoginAt], [PasswordHash], [TeamId], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-09-16 13:05:21.517 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (Size = 2000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuditLogs] ([Action], [Metadata], [Timestamp], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [UserRoles] ([RoleId], [UserId], [AssignedAt])
VALUES (@p4, @p5, @p6);
2025-09-16 13:05:21.524 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 13:05:21.530 +02:00 [INF] Successfully created user: TestUser1 with ID: 3
2025-09-16 13:05:21.532 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[UserManagementSystem.Application.DTOs.UserDto, UserManagementSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-16 13:05:21.538 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.UsersController.CreateUser (UserManagementSystem.Api) in 656.2731ms
2025-09-16 13:05:21.540 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.UsersController.CreateUser (UserManagementSystem.Api)'
2025-09-16 13:05:21.543 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7149/api/Users - 201 null application/json; charset=utf-8 687.2533ms
2025-09-16 14:14:41.481 +02:00 [INF] Starting web application
2025-09-16 14:14:43.691 +02:00 [INF] User profile is available. Using 'C:\Users\Axel1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-16 14:14:44.445 +02:00 [INF] Now listening on: https://localhost:7149
2025-09-16 14:14:44.447 +02:00 [INF] Now listening on: http://localhost:5114
2025-09-16 14:14:44.453 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 14:14:44.457 +02:00 [INF] Hosting environment: Development
2025-09-16 14:14:44.459 +02:00 [INF] Content root path: C:\Users\Axel1\Desktop\Proyectos .Net\UserManagementSystem.Api\UserManagementSystem.Api
2025-09-16 14:14:46.407 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/_vs/browserLink - null null
2025-09-16 14:14:46.407 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/_framework/aspnetcore-browser-refresh.js - null null
2025-09-16 14:14:46.523 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/_framework/aspnetcore-browser-refresh.js - 200 13784 application/javascript; charset=utf-8 128.7291ms
2025-09-16 14:14:46.752 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/_vs/browserLink - 200 null text/javascript; charset=UTF-8 360.2058ms
2025-09-16 14:14:46.972 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/swagger/v1/swagger.json - null null
2025-09-16 14:14:47.731 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 759.2769ms
2025-09-16 14:28:56.693 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7149/api/Auth/login - application/json 58
2025-09-16 14:28:57.041 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.AuthController.Login (UserManagementSystem.Api)'
2025-09-16 14:28:57.201 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[UserManagementSystem.Application.DTOs.Auth.LoginResponseDto]]] Login(UserManagementSystem.Application.DTOs.Auth.LoginRequestDto) on controller UserManagementSystem.Api.Controllers.AuthController (UserManagementSystem.Api).
2025-09-16 14:28:59.473 +02:00 [INF] API: Login endpoint called for username: Admin_AxelSC
2025-09-16 14:28:59.480 +02:00 [INF] Login attempt for username: Admin_AxelSC
2025-09-16 14:29:01.453 +02:00 [INF] Executed DbCommand (224ms) [Parameters=[@__username_0='?' (Size = 32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-09-16 14:29:01.894 +02:00 [INF] Executed DbCommand (58ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 14:29:03.567 +02:00 [INF] JWT Key length: 54
2025-09-16 14:29:03.570 +02:00 [INF] JWT Issuer: UserManagementSystem
2025-09-16 14:29:03.572 +02:00 [INF] JWT Audience: UserManagementSystemUsers
2025-09-16 14:29:03.966 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (Size = 2000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AuditLogs] ([Action], [Metadata], [Timestamp], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-09-16 14:29:04.024 +02:00 [INF] Login successful for user: Admin_AxelSC
2025-09-16 14:29:04.044 +02:00 [INF] Executing OkObjectResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[UserManagementSystem.Application.DTOs.Auth.LoginResponseDto, UserManagementSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-16 14:29:04.103 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.AuthController.Login (UserManagementSystem.Api) in 6888.9373ms
2025-09-16 14:29:04.107 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.AuthController.Login (UserManagementSystem.Api)'
2025-09-16 14:29:04.124 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7149/api/Auth/login - 200 null application/json; charset=utf-8 7438.5723ms
2025-09-16 14:30:45.620 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/api/Teams - null null
2025-09-16 14:30:45.790 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.TeamsController.GetAllTeams (UserManagementSystem.Api)'
2025-09-16 14:30:45.804 +02:00 [INF] Route matched with {action = "GetAllTeams", controller = "Teams"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[System.Collections.Generic.List`1[UserManagementSystem.Application.DTOs.Teams.TeamSummaryDto]]]] GetAllTeams() on controller UserManagementSystem.Api.Controllers.TeamsController (UserManagementSystem.Api).
2025-09-16 14:30:45.926 +02:00 [INF] API: GetAllTeams called by user: Admin_AxelSC
2025-09-16 14:30:45.933 +02:00 [INF] Retrieving all teams
2025-09-16 14:30:45.965 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Description], [t].[Name]
FROM [Teams] AS [t]
2025-09-16 14:30:46.080 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__teamId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[TeamId] = @__teamId_0 AND EXISTS (
        SELECT 1
        FROM [UserRoles] AS [u0]
        INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
        WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Manager')
) AS [t]
LEFT JOIN (
    SELECT [u1].[UserId], [u1].[RoleId], [u1].[AssignedAt], [r0].[Id], [r0].[Description], [r0].[Name]
    FROM [UserRoles] AS [u1]
    INNER JOIN [Roles] AS [r0] ON [u1].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 14:30:46.125 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__team_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[TeamId] = @__team_Id_0
2025-09-16 14:30:46.148 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__teamId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[TeamId] = @__teamId_0 AND EXISTS (
        SELECT 1
        FROM [UserRoles] AS [u0]
        INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
        WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Manager')
) AS [t]
LEFT JOIN (
    SELECT [u1].[UserId], [u1].[RoleId], [u1].[AssignedAt], [r0].[Id], [r0].[Description], [r0].[Name]
    FROM [UserRoles] AS [u1]
    INNER JOIN [Roles] AS [r0] ON [u1].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 14:30:46.157 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__team_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[TeamId] = @__team_Id_0
2025-09-16 14:30:46.164 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__teamId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[TeamId] = @__teamId_0 AND EXISTS (
        SELECT 1
        FROM [UserRoles] AS [u0]
        INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
        WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Manager')
) AS [t]
LEFT JOIN (
    SELECT [u1].[UserId], [u1].[RoleId], [u1].[AssignedAt], [r0].[Id], [r0].[Description], [r0].[Name]
    FROM [UserRoles] AS [u1]
    INNER JOIN [Roles] AS [r0] ON [u1].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 14:30:46.170 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__team_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[TeamId] = @__team_Id_0
2025-09-16 14:30:46.179 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__teamId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[TeamId] = @__teamId_0 AND EXISTS (
        SELECT 1
        FROM [UserRoles] AS [u0]
        INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
        WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Manager')
) AS [t]
LEFT JOIN (
    SELECT [u1].[UserId], [u1].[RoleId], [u1].[AssignedAt], [r0].[Id], [r0].[Description], [r0].[Name]
    FROM [UserRoles] AS [u1]
    INNER JOIN [Roles] AS [r0] ON [u1].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 14:30:46.186 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__team_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[TeamId] = @__team_Id_0
2025-09-16 14:30:46.193 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__teamId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[TeamId] = @__teamId_0 AND EXISTS (
        SELECT 1
        FROM [UserRoles] AS [u0]
        INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
        WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Manager')
) AS [t]
LEFT JOIN (
    SELECT [u1].[UserId], [u1].[RoleId], [u1].[AssignedAt], [r0].[Id], [r0].[Description], [r0].[Name]
    FROM [UserRoles] AS [u1]
    INNER JOIN [Roles] AS [r0] ON [u1].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 14:30:46.200 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__team_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[TeamId] = @__team_Id_0
2025-09-16 14:30:46.206 +02:00 [INF] Successfully retrieved 5 teams
2025-09-16 14:30:46.209 +02:00 [INF] Executing OkObjectResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[System.Collections.Generic.List`1[[UserManagementSystem.Application.DTOs.Teams.TeamSummaryDto, UserManagementSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:30:46.218 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.TeamsController.GetAllTeams (UserManagementSystem.Api) in 409.354ms
2025-09-16 14:30:46.224 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.TeamsController.GetAllTeams (UserManagementSystem.Api)'
2025-09-16 14:30:46.227 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/api/Teams - 200 null application/json; charset=utf-8 606.6566ms
2025-09-16 19:51:29.580 +02:00 [INF] Starting web application
2025-09-16 19:51:31.132 +02:00 [INF] User profile is available. Using 'C:\Users\Axel1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-16 19:51:31.568 +02:00 [INF] Now listening on: https://localhost:7149
2025-09-16 19:51:31.571 +02:00 [INF] Now listening on: http://localhost:5114
2025-09-16 19:51:31.584 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 19:51:31.586 +02:00 [INF] Hosting environment: Development
2025-09-16 19:51:31.587 +02:00 [INF] Content root path: C:\Users\Axel1\Desktop\Proyectos .Net\UserManagementSystem.Api\UserManagementSystem.Api
2025-09-16 19:51:32.201 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/_framework/aspnetcore-browser-refresh.js - null null
2025-09-16 19:51:32.201 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/_vs/browserLink - null null
2025-09-16 19:51:32.257 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/_framework/aspnetcore-browser-refresh.js - 200 13784 application/javascript; charset=utf-8 54.0557ms
2025-09-16 19:51:32.346 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/_vs/browserLink - 200 null text/javascript; charset=UTF-8 153.8907ms
2025-09-16 19:51:32.521 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/swagger/v1/swagger.json - null null
2025-09-16 19:51:33.012 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 491.8767ms
2025-09-16 19:51:52.950 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7149/api/Auth/login - application/json 58
2025-09-16 19:51:53.121 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.AuthController.Login (UserManagementSystem.Api)'
2025-09-16 19:51:53.167 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[UserManagementSystem.Application.DTOs.Auth.LoginResponseDto]]] Login(UserManagementSystem.Application.DTOs.Auth.LoginRequestDto) on controller UserManagementSystem.Api.Controllers.AuthController (UserManagementSystem.Api).
2025-09-16 19:51:54.836 +02:00 [INF] API: Login endpoint called for username: Admin_AxelSC
2025-09-16 19:51:54.842 +02:00 [INF] Login attempt for username: Admin_AxelSC
2025-09-16 19:51:56.054 +02:00 [INF] Executed DbCommand (110ms) [Parameters=[@__username_0='?' (Size = 32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-09-16 19:51:56.366 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 19:51:57.759 +02:00 [INF] JWT Key length: 54
2025-09-16 19:51:57.762 +02:00 [INF] JWT Issuer: UserManagementSystem
2025-09-16 19:51:57.764 +02:00 [INF] JWT Audience: UserManagementSystemUsers
2025-09-16 19:51:58.059 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (Size = 2000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AuditLogs] ([Action], [Metadata], [Timestamp], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-09-16 19:51:58.102 +02:00 [INF] Login successful for user: Admin_AxelSC
2025-09-16 19:51:58.118 +02:00 [INF] Executing OkObjectResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[UserManagementSystem.Application.DTOs.Auth.LoginResponseDto, UserManagementSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-16 19:51:58.164 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.AuthController.Login (UserManagementSystem.Api) in 4987.5657ms
2025-09-16 19:51:58.168 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.AuthController.Login (UserManagementSystem.Api)'
2025-09-16 19:51:58.180 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7149/api/Auth/login - 200 null application/json; charset=utf-8 5230.4195ms
2025-09-16 19:52:47.922 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/api/Users - null null
2025-09-16 19:52:48.052 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.UsersController.GetAllUsers (UserManagementSystem.Api)'
2025-09-16 19:52:48.061 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[System.Collections.Generic.List`1[UserManagementSystem.Application.DTOs.UserSummaryDto]]]] GetAllUsers() on controller UserManagementSystem.Api.Controllers.UsersController (UserManagementSystem.Api).
2025-09-16 19:52:48.151 +02:00 [INF] API: GetAllUsers called by user: Admin_AxelSC
2025-09-16 19:52:48.157 +02:00 [INF] Retrieving all users
2025-09-16 19:52:48.179 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
FROM [Users] AS [u]
2025-09-16 19:52:48.187 +02:00 [INF] Successfully retrieved 3 users
2025-09-16 19:52:48.191 +02:00 [INF] Executing OkObjectResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[System.Collections.Generic.List`1[[UserManagementSystem.Application.DTOs.UserSummaryDto, UserManagementSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 19:52:48.199 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.UsersController.GetAllUsers (UserManagementSystem.Api) in 134.0353ms
2025-09-16 19:52:48.214 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.UsersController.GetAllUsers (UserManagementSystem.Api)'
2025-09-16 19:52:48.218 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/api/Users - 200 null application/json; charset=utf-8 296.1004ms
2025-09-16 19:54:07.344 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7149/api/RoleManagement/promote-to-manager - application/json 32
2025-09-16 19:54:07.373 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.RoleManagementController.PromoteToManager (UserManagementSystem.Api)'
2025-09-16 19:54:07.380 +02:00 [INF] Route matched with {action = "PromoteToManager", controller = "RoleManagement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[System.Boolean]]] PromoteToManager(UserManagementSystem.Application.DTOs.RoleManagement.PromoteToManagerDto) on controller UserManagementSystem.Api.Controllers.RoleManagementController (UserManagementSystem.Api).
2025-09-16 19:54:07.420 +02:00 [INF] API: PromoteToManager called by admin: Admin_AxelSC
2025-09-16 19:54:07.427 +02:00 [INF] Admin 1 promoting user 3 to manager of team 1
2025-09-16 19:54:07.444 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 19:54:07.452 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 19:54:07.485 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[CreatedAt], [t].[Description], [t].[Name]
FROM [Teams] AS [t]
WHERE [t].[Id] = @__p_0
2025-09-16 19:54:07.579 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__teamId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[TeamId] = @__teamId_0 AND EXISTS (
    SELECT 1
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Manager')
2025-09-16 19:54:07.586 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 19:54:07.591 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.RoleManagementController.PromoteToManager (UserManagementSystem.Api) in 208.1175ms
2025-09-16 19:54:07.594 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.RoleManagementController.PromoteToManager (UserManagementSystem.Api)'
2025-09-16 19:54:07.597 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7149/api/RoleManagement/promote-to-manager - 400 null application/json; charset=utf-8 254.7351ms
2025-09-16 19:55:31.851 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/api/Roles/user/3 - null null
2025-09-16 19:55:31.868 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.RolesController.GetRolesByUserId (UserManagementSystem.Api)'
2025-09-16 19:55:31.891 +02:00 [INF] Route matched with {action = "GetRolesByUserId", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[System.Collections.Generic.List`1[UserManagementSystem.Application.DTOs.RoleDto]]]] GetRolesByUserId(Int32) on controller UserManagementSystem.Api.Controllers.RolesController (UserManagementSystem.Api).
2025-09-16 19:55:31.901 +02:00 [INF] API: GetRolesByUserId endpoint called for user ID: 3
2025-09-16 19:55:31.904 +02:00 [INF] Retrieving roles for user ID: 3
2025-09-16 19:55:31.938 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt]
FROM [Roles] AS [r]
LEFT JOIN [UserRoles] AS [u0] ON [r].[Id] = [u0].[RoleId]
WHERE EXISTS (
    SELECT 1
    FROM [UserRoles] AS [u]
    WHERE [r].[Id] = [u].[RoleId] AND [u].[UserId] = @__userId_0)
ORDER BY [r].[Id], [u0].[UserId]
2025-09-16 19:55:31.946 +02:00 [INF] Successfully retrieved 1 roles for user ID: 3
2025-09-16 19:55:31.949 +02:00 [INF] Executing OkObjectResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[System.Collections.Generic.List`1[[UserManagementSystem.Application.DTOs.RoleDto, UserManagementSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 19:55:31.953 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.RolesController.GetRolesByUserId (UserManagementSystem.Api) in 58.0901ms
2025-09-16 19:55:31.957 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.RolesController.GetRolesByUserId (UserManagementSystem.Api)'
2025-09-16 19:55:31.959 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/api/Roles/user/3 - 200 null application/json; charset=utf-8 109.6764ms
2025-09-16 19:55:52.929 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7149/api/RoleManagement/promote-to-manager - application/json 32
2025-09-16 19:55:52.952 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.RoleManagementController.PromoteToManager (UserManagementSystem.Api)'
2025-09-16 19:55:52.955 +02:00 [INF] Route matched with {action = "PromoteToManager", controller = "RoleManagement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[System.Boolean]]] PromoteToManager(UserManagementSystem.Application.DTOs.RoleManagement.PromoteToManagerDto) on controller UserManagementSystem.Api.Controllers.RoleManagementController (UserManagementSystem.Api).
2025-09-16 19:55:52.962 +02:00 [INF] API: PromoteToManager called by admin: Admin_AxelSC
2025-09-16 19:55:52.965 +02:00 [INF] Admin 1 promoting user 2 to manager of team 1
2025-09-16 19:55:52.977 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 19:55:52.985 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 19:55:52.994 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[CreatedAt], [t].[Description], [t].[Name]
FROM [Teams] AS [t]
WHERE [t].[Id] = @__p_0
2025-09-16 19:55:53.006 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__teamId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[TeamId] = @__teamId_0 AND EXISTS (
    SELECT 1
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Manager')
2025-09-16 19:55:53.030 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [u].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
FROM [UserRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-09-16 19:55:53.050 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Name] = @__name_0
2025-09-16 19:55:53.151 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (Size = 2000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p13='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (Size = 256), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (Size = 512), @p11='?' (DbType = Int32), @p12='?' (Size = 32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuditLogs] ([Action], [Metadata], [Timestamp], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
DELETE FROM [UserRoles]
OUTPUT 1
WHERE [RoleId] = @p4 AND [UserId] = @p5;
UPDATE [Users] SET [CreatedAt] = @p6, [Email] = @p7, [IsActive] = @p8, [LastLoginAt] = @p9, [PasswordHash] = @p10, [TeamId] = @p11, [Username] = @p12
OUTPUT 1
WHERE [Id] = @p13;
INSERT INTO [UserRoles] ([RoleId], [UserId], [AssignedAt])
VALUES (@p14, @p15, @p16);
2025-09-16 19:55:53.185 +02:00 [INF] Successfully promoted user testuser to manager of team Finance
2025-09-16 19:55:53.189 +02:00 [INF] Executing OkObjectResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 19:55:53.192 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.RoleManagementController.PromoteToManager (UserManagementSystem.Api) in 232.9175ms
2025-09-16 19:55:53.195 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.RoleManagementController.PromoteToManager (UserManagementSystem.Api)'
2025-09-16 19:55:53.198 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7149/api/RoleManagement/promote-to-manager - 200 null application/json; charset=utf-8 269.3868ms
2025-09-16 19:55:58.905 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7149/api/RoleManagement/promote-to-manager - application/json 32
2025-09-16 19:55:58.913 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.RoleManagementController.PromoteToManager (UserManagementSystem.Api)'
2025-09-16 19:55:58.915 +02:00 [INF] Route matched with {action = "PromoteToManager", controller = "RoleManagement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[System.Boolean]]] PromoteToManager(UserManagementSystem.Application.DTOs.RoleManagement.PromoteToManagerDto) on controller UserManagementSystem.Api.Controllers.RoleManagementController (UserManagementSystem.Api).
2025-09-16 19:55:58.926 +02:00 [INF] API: PromoteToManager called by admin: Admin_AxelSC
2025-09-16 19:55:58.928 +02:00 [INF] Admin 1 promoting user 2 to manager of team 1
2025-09-16 19:55:58.954 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 19:55:58.963 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 19:55:58.972 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[CreatedAt], [t].[Description], [t].[Name]
FROM [Teams] AS [t]
WHERE [t].[Id] = @__p_0
2025-09-16 19:55:58.987 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__teamId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[TeamId] = @__teamId_0 AND EXISTS (
    SELECT 1
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Manager')
2025-09-16 19:55:59.037 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__teamId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[TeamId] = @__teamId_0 AND EXISTS (
        SELECT 1
        FROM [UserRoles] AS [u0]
        INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
        WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Manager')
) AS [t]
LEFT JOIN (
    SELECT [u1].[UserId], [u1].[RoleId], [u1].[AssignedAt], [r0].[Id], [r0].[Description], [r0].[Name]
    FROM [UserRoles] AS [u1]
    INNER JOIN [Roles] AS [r0] ON [u1].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 19:55:59.042 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 19:55:59.046 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.RoleManagementController.PromoteToManager (UserManagementSystem.Api) in 126.3722ms
2025-09-16 19:55:59.050 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.RoleManagementController.PromoteToManager (UserManagementSystem.Api)'
2025-09-16 19:55:59.053 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7149/api/RoleManagement/promote-to-manager - 400 null application/json; charset=utf-8 148.7934ms
2025-09-16 19:56:56.360 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7149/api/RoleManagement/change-role/2 - application/json 23
2025-09-16 19:56:56.372 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.RoleManagementController.ChangeUserRole (UserManagementSystem.Api)'
2025-09-16 19:56:56.380 +02:00 [INF] Route matched with {action = "ChangeUserRole", controller = "RoleManagement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[System.Boolean]]] ChangeUserRole(Int32, UserManagementSystem.Application.DTOs.RoleManagement.ChangeRoleDto) on controller UserManagementSystem.Api.Controllers.RoleManagementController (UserManagementSystem.Api).
2025-09-16 19:56:56.389 +02:00 [INF] API: ChangeUserRole(2) to User called by: Admin_AxelSC
2025-09-16 19:56:56.395 +02:00 [INF] Manager 1 changing role of user 2 to User
2025-09-16 19:56:56.407 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 19:56:56.414 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 19:56:56.421 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 19:56:56.434 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 19:56:56.454 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [u].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
FROM [UserRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-09-16 19:56:56.462 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Name] = @__name_0
2025-09-16 19:56:56.479 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (Size = 2000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuditLogs] ([Action], [Metadata], [Timestamp], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
DELETE FROM [UserRoles]
OUTPUT 1
WHERE [RoleId] = @p4 AND [UserId] = @p5;
INSERT INTO [UserRoles] ([RoleId], [UserId], [AssignedAt])
VALUES (@p6, @p7, @p8);
2025-09-16 19:56:56.486 +02:00 [INF] Successfully changed role of user testuser to User
2025-09-16 19:56:56.489 +02:00 [INF] Executing OkObjectResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 19:56:56.492 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.RoleManagementController.ChangeUserRole (UserManagementSystem.Api) in 108.7124ms
2025-09-16 19:56:56.496 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.RoleManagementController.ChangeUserRole (UserManagementSystem.Api)'
2025-09-16 19:56:56.498 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7149/api/RoleManagement/change-role/2 - 200 null application/json; charset=utf-8 138.9892ms
2025-09-16 20:31:08.042 +02:00 [INF] Starting web application
2025-09-16 20:31:09.911 +02:00 [INF] User profile is available. Using 'C:\Users\Axel1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-16 20:31:10.487 +02:00 [INF] Now listening on: https://localhost:7149
2025-09-16 20:31:10.498 +02:00 [INF] Now listening on: http://localhost:5114
2025-09-16 20:31:10.508 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 20:31:10.513 +02:00 [INF] Hosting environment: Development
2025-09-16 20:31:10.517 +02:00 [INF] Content root path: C:\Users\Axel1\Desktop\Proyectos .Net\UserManagementSystem.Api\UserManagementSystem.Api
2025-09-16 20:31:14.015 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/_framework/aspnetcore-browser-refresh.js - null null
2025-09-16 20:31:14.015 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/_vs/browserLink - null null
2025-09-16 20:31:14.091 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/_framework/aspnetcore-browser-refresh.js - 200 13784 application/javascript; charset=utf-8 85.9861ms
2025-09-16 20:31:14.238 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/_vs/browserLink - 200 null text/javascript; charset=UTF-8 234.9436ms
2025-09-16 20:31:14.444 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/swagger/v1/swagger.json - null null
2025-09-16 20:31:15.114 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 670.9056ms
2025-09-16 20:31:54.432 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7149/api/RoleManagement/promote-to-manager - application/json 32
2025-09-16 20:31:54.654 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-16 20:31:54.665 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-16 20:31:54.670 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7149/api/RoleManagement/promote-to-manager - 401 0 null 238.6547ms
2025-09-16 20:33:40.023 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/api/Users - null null
2025-09-16 20:33:40.048 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-16 20:33:40.052 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-16 20:33:40.055 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/api/Users - 401 0 null 32.8857ms
2025-09-16 20:35:42.950 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7149/api/Auth/login - application/json 58
2025-09-16 20:35:42.986 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.AuthController.Login (UserManagementSystem.Api)'
2025-09-16 20:35:43.055 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[UserManagementSystem.Application.DTOs.Auth.LoginResponseDto]]] Login(UserManagementSystem.Application.DTOs.Auth.LoginRequestDto) on controller UserManagementSystem.Api.Controllers.AuthController (UserManagementSystem.Api).
2025-09-16 20:35:44.623 +02:00 [INF] API: Login endpoint called for username: Admin_AxelSC
2025-09-16 20:35:44.629 +02:00 [INF] Login attempt for username: Admin_AxelSC
2025-09-16 20:35:45.732 +02:00 [INF] Executed DbCommand (107ms) [Parameters=[@__username_0='?' (Size = 32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-09-16 20:35:46.125 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[Email], [t].[IsActive], [t].[LastLoginAt], [t].[PasswordHash], [t].[TeamId], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[AssignedAt], [t0].[Id], [t0].[Description], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u0].[AssignedAt], [r].[Id], [r].[Description], [r].[Name]
    FROM [UserRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2025-09-16 20:35:47.559 +02:00 [INF] JWT Key length: 54
2025-09-16 20:35:47.563 +02:00 [INF] JWT Issuer: UserManagementSystem
2025-09-16 20:35:47.565 +02:00 [INF] JWT Audience: UserManagementSystemUsers
2025-09-16 20:35:47.885 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (Size = 2000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AuditLogs] ([Action], [Metadata], [Timestamp], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-09-16 20:35:47.931 +02:00 [INF] Login successful for user: Admin_AxelSC
2025-09-16 20:35:47.949 +02:00 [INF] Executing OkObjectResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[UserManagementSystem.Application.DTOs.Auth.LoginResponseDto, UserManagementSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-16 20:35:47.995 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.AuthController.Login (UserManagementSystem.Api) in 4929.2914ms
2025-09-16 20:35:47.999 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.AuthController.Login (UserManagementSystem.Api)'
2025-09-16 20:35:48.015 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7149/api/Auth/login - 200 null application/json; charset=utf-8 5064.8156ms
2025-09-16 20:37:42.305 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/api/Auth/me - null null
2025-09-16 20:37:42.321 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-16 20:37:42.335 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-16 20:37:42.340 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/api/Auth/me - 401 0 null 36.825ms
2025-09-16 20:38:47.236 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7149/api/Users - null null
2025-09-16 20:38:47.364 +02:00 [INF] Executing endpoint 'UserManagementSystem.Api.Controllers.UsersController.GetAllUsers (UserManagementSystem.Api)'
2025-09-16 20:38:47.376 +02:00 [INF] Route matched with {action = "GetAllUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementSystem.Application.DTOs.ApiResponse`1[System.Collections.Generic.List`1[UserManagementSystem.Application.DTOs.UserSummaryDto]]]] GetAllUsers() on controller UserManagementSystem.Api.Controllers.UsersController (UserManagementSystem.Api).
2025-09-16 20:38:47.488 +02:00 [INF] API: GetAllUsers called by user: Admin_AxelSC
2025-09-16 20:38:47.492 +02:00 [INF] Retrieving all users
2025-09-16 20:38:47.512 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsActive], [u].[LastLoginAt], [u].[PasswordHash], [u].[TeamId], [u].[Username]
FROM [Users] AS [u]
2025-09-16 20:38:47.521 +02:00 [INF] Successfully retrieved 3 users
2025-09-16 20:38:47.524 +02:00 [INF] Executing OkObjectResult, writing value of type 'UserManagementSystem.Application.DTOs.ApiResponse`1[[System.Collections.Generic.List`1[[UserManagementSystem.Application.DTOs.UserSummaryDto, UserManagementSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 20:38:47.531 +02:00 [INF] Executed action UserManagementSystem.Api.Controllers.UsersController.GetAllUsers (UserManagementSystem.Api) in 150.0349ms
2025-09-16 20:38:47.540 +02:00 [INF] Executed endpoint 'UserManagementSystem.Api.Controllers.UsersController.GetAllUsers (UserManagementSystem.Api)'
2025-09-16 20:38:47.544 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7149/api/Users - 200 null application/json; charset=utf-8 308.636ms
